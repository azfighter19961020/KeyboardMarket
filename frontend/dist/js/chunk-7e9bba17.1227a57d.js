(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e9bba17"],{"6f5d":function(t,e,a){t.exports=a.p+"img/cart.a0eb5979.svg"},"71c2":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticStyle:{height:"150px"}},[o("div",{staticStyle:{height:"100px"},attrs:{id:"header"}},[o("b-navbar",{staticStyle:{height:"100%"},attrs:{toggleable:"lg",tyle:"dark",variant:"info"}},[o("b-navbar-brand",{attrs:{href:"/#/index"}},[o("img",{attrs:{src:a("c2fb"),alt:"鍵盤貿易logo"}})]),o("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),o("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[o("b-navbar-nav",[o("b-nav-item",{attrs:{href:"/#/index"}},[t._v("首頁")])],1),o("b-navbar-nav",{staticClass:"ml-auto"},[o("b-nav-dropdown",{directives:[{name:"show",rawName:"v-show",value:t.isLogin,expression:"isLogin"}],attrs:{right:""},on:{show:t.loadCart}},[o("template",{slot:"button-content"},[o("img",{attrs:{src:a("6f5d"),alt:"購物車"}})]),t._l(t.carts,(function(e){return o("b-dropdown-item",{key:e.id,staticStyle:{width:"600px"}},[o("b-row",[o("b-col",{attrs:{cols:"2"}},[o("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:"http://localhost:8000"+e.product.img,alt:""}})]),o("b-col",{attrs:{cols:"3"}},[o("div",{staticStyle:{"white-space":"normal","word-wrap":"break-word","word-break":"break-all",width:"100%",height:"100%"}},[t._v(" "+t._s(e.product.name)+" ")])]),o("b-col",{attrs:{cols:"3"}},[o("b-form-spinbutton",{attrs:{id:"product_id_spin",min:"1",max:"100"},on:{change:function(a){return t.fixAmount(e.id)}},model:{value:e.amount,callback:function(a){t.$set(e,"amount",a)},expression:"item.amount"}})],1),o("b-col",{attrs:{cols:"2"}},[o("h4",[t._v(t._s(e.product.price*e.amount))])]),o("b-col",{attrs:{cols:"2"}},[o("b-button",{attrs:{variant:"danger"},on:{click:function(a){return t.deleteCart(e.id)}}},[t._v(" 刪除 ")])],1)],1)],1)})),o("hr"),o("b-dropdown-item",{staticStyle:{"padding-left":"calc(100% - 100px)"}},[o("b-button",{attrs:{variant:"info"},on:{click:t.createOrder}},[t._v("結帳")])],1),o("hr")],2),o("b-nav-item-dropdown",{attrs:{text:"會員",right:""}},[o("b-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:!t.isLogin,expression:"!isLogin"}],attrs:{href:"/#/login"}},[t._v("登入")]),o("b-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:!t.isLogin,expression:"!isLogin"}],attrs:{href:"/#/register"}},[t._v("註冊")]),o("b-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:t.isLogin,expression:"isLogin"}],attrs:{href:"/#/self"}},[t._v("個人資料")]),o("b-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:t.isLogin,expression:"isLogin"}],attrs:{href:"/#/order"}},[t._v("訂單")]),o("b-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:t.isLogin,expression:"isLogin"}],on:{click:t.logout}},[t._v("登出")])],1)],1)],1)],1)],1),o("div",{staticStyle:{width:"100%",height:"100px"},attrs:{id:"catgoryNavigator"}},[o("b-nav",{attrs:{tabs:"",fill:""}},t._l(t.categories,(function(e){return o("b-nav-item",{key:e.value,on:{click:function(a){return t.refresh(e.value)}}},[t._v(" "+t._s(e.category)+" ")])})),1)],1)])},n=[],i=(a("159b"),a("a434"),a("2c28")),r=a("cc17"),s=a("2785"),c={name:"kheader",data:function(){return{isLogin:!1,username:"",categories:[],carts:[]}},mounted:function(){var t=this,e=window.localStorage.getItem("username"),a=window.localStorage.getItem("token");null!=e&&null!=a&&(this.username=e,this.isLogin=!0),Object(i["b"])().then((function(e){e.data.code==s["b"]?t.categories=e.data.data:t.$fire({type:"error",text:e.data.data})}))},methods:{createOrder:function(){window.location.href="/#/createorder",window.location.reload()},deleteCart:function(t){var e=this,a=window.localStorage.getItem("token");Object(r["b"])(t,a).then((function(a){a.data.code==s["b"]?(e.carts.forEach((function(a,o){a.id==t&&e.carts.splice(o,1)})),e.$bvToast.toast("刪除成功",{title:"購物車訊息",autoHideDelay:5e3,appendToast:!0})):e.$bvToast.toast(a.data.data,{title:"購物車訊息",autoHideDelay:5e3,appendToast:!0})}))},fixAmount:function(t){var e=this,a=window.localStorage.getItem("username"),o=window.localStorage.getItem("token"),n={};this.carts.forEach((function(e){e.id==t&&(n=e)}));var i={username:a,pid:n.product.id,amount:n.amount};Object(r["c"])(i,o).then((function(t){t.data.code==s["b"]?e.$bvToast.toast("修改數量成功",{title:"購物車訊息",autoHideDelay:5e3,appendToast:!0}):e.$bvToast.toast(t.data.data,{title:"購物車訊息",autoHideDelay:5e3,appendToast:!0})}))},refresh:function(t){window.location.href="/#/products/"+t,window.location.reload()},loadCart:function(){var t=this,e=window.localStorage.getItem("username"),a=window.localStorage.getItem("token");null!=e&&null!=a?Object(r["d"])(e,a).then((function(e){e.data.code==s["b"]?t.carts=e.data.data:t.$fire({type:"error",text:e.data.data})})):this.$fire({type:"error",text:"請登入！"}).then((function(){window.location.href="/#/login",window.location.reload()}))},logout:function(){window.localStorage.removeItem("username"),window.localStorage.removeItem("token"),window.location.reload()}}},l=c,d=a("2877"),u=Object(d["a"])(l,o,n,!1,null,null,null);e["default"]=u.exports},c2fb:function(t,e,a){t.exports=a.p+"img/logo_transparent.5c9cc809.png"}}]);
//# sourceMappingURL=chunk-7e9bba17.1227a57d.js.map